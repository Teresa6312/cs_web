{% extends "main/base_site.html" %}
{% load i18n static %}



{% block title%}
    {% trans 'Add Package' %}
{% endblock%}

{% block messages %}
{% endblock messages %}


{% block extrastyle %}
<link rel="stylesheet" href="{% static 'css/multistepform.css'%}"/>
{% endblock %}


{% block content %}

{% if form.no_rush_request %}
<div class="w3-cell-row w3-container w3-mobile" style="width:80%; margin:auto;">
  <div class="text-xxlarge-bold w3-panel">{% trans 'Direct Shipping' %}</div>
  {% else %}
  <div class="text-xxlarge-bold w3-panel">{% trans 'Co-hipping' %}</div>
  {% endif %}
</div>

<form method="post" enctype="multipart/form-data">{% csrf_token %}
    <div class="tab">
          <div class="w3-cell-row w3-container w3-mobile" style="width:80%; margin:auto;">
            {% if messages %}
            <ul class="messagelist">{% for message in messages %}
              <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message|capfirst }}</li>
            {% endfor %}</ul>
            {% endif %}
            {% if form.errors or receiverform.errors %}
                <p class="errornote">
                {% trans "Please correct the error(s) below." %}
                </p>
            {% endif %}

              <div class="w3-cell w3-container" style="width:50%;">
                <div class="text-medium">{% trans 'Ship to' %}</div>
              </div>
              <div class="w3-cell w3-container" style="width:50%;">
                <div class="text-medium">{% trans 'Ship from' %}</div>
              </div>
          </div>
          <hr/>
          <div class="w3-container w3-mobile" style="width:80%; margin:auto;">
                <div class="w3-cell-row">
                  <div class="w3-cell w3-container" style="width:50%;">
                      {% if form.no_rush_request %}
                        <div class="form-row">
                            {{ form.ship_carrier.errors }}
                            {{ form.ship_carrier.label_tag }}{{ form.ship_carrier }}
                        </div>
                        <div class="form-row">
                            {{ form.no_rush_request.errors }}
                            {{ form.no_rush_request }}&emsp;{{ form.no_rush_request.label_tag }}
                        </div>
                      {% endif %}
                      <div class="form-row">
                            {{ form.low_volume_request.errors }}
                            {{ form.low_volume_request }}&emsp;{{ form.low_volume_request.label_tag }}
                      </div>
                      {% block shippingset %} {% endblock%}
                  </div>
                  <div class="w3-cell w3-container" style="width:50%;">
                        <div class="form-row">
                          {{ form.wh_received.errors }}
                          {{ form.wh_received.label_tag }} {{ form.wh_received }}
                        </div>
                        <div class="form-row">
                          {{ form.cust_carrier.errors }}
                          {{ form.cust_carrier.label_tag }} {{ form.cust_carrier }}
                        </div>
                        <div class="form-row">
                          {{ form.cust_tracking_num.errors }}
                          {{ form.cust_tracking_num.label_tag }} {{ form.cust_tracking_num }}
                        </div>

                        <div class="form-row">
                          {{ form.memo.errors }}
                          {{ form.memo.label_tag }} {{ form.memo }}
                        </div>
                    </div>
                  </div>
          </div>
      </div>
      <div class="tab">

                    {{ itemset.management_form }}

                <div id="add_item_btn_row" class="w3-container w3-center w3-cell-row">
                  <button type="button" class="w3-half logo-red" id="add_snapshot_btn" onclick="AddSnapshotBlock()">{% trans 'Add Snapshot' %}</button>
                  <div class="w3-cell w3-cell-middle">OR</div>
                  <button type="button" class="w3-half w3-right logo-blue" id="add_item_btn" onclick="createItemsetBlock()">{% trans "Add Items' Detail" %}</button>
                </div>
        <div style="width:70%; margin:auto;" id="item_information_block">
        </div>

    </div>
    <div class="w3-row" style="width:70%; margin:auto">
      <div class="w3-right">
        <button type="button" class="logo-blue" id="prevBtn" onclick="nextPrev(-1)" style="display:none;">{% trans "Previous" %}</button>
        <button type="button" class="logo-red" id="nextBtn" onclick="nextPrev(1)" style="display:none;">{% trans "Next" %}</button>
        <span id="submit_block">
          {% block extrabtn %}
          {% endblock %}
          <button class="logo-red" type="button" onclick="clearForm(this)">{% trans 'Clear Form' %}</button>
          <input class="logo-blue" type="submit" name="next" value="{% trans 'Save and add new package' %}" />
          <input class="logo-red" type="submit" name="finish" value="{% trans 'Submit' %}"/>
        </span>
      </div>
    </div>

</form>



{% endblock %}




{% block script%}
<script type="text/javascript" src="{% static 'js/register.js' %}"></script>
<script src="{% static 'js/jquery.formset.js' %}"></script>
<script src="{% static 'js/packageset.js' %}"></script>
<script>
$(document).ready(function(){
  $("#follow_user_infor").click(function(){
       $('#id_first_name').val('{{user.first_name}}');
			 $('#id_last_name').val('{{user.last_name}}');
			 $('#id_phone').val('{{user.phone}}');
  });
	$("#use_last_infor").click(function(){
			 $('#id_first_name').val('{{user.service_set.first.receiver.first_name}}');
			 $('#id_last_name').val('{{user.service_set.first.receiver.last_name}}');
			 $('#id_phone').val('{{user.service_set.first.receiver.phone}}');
	});
});
</script>
{% endblock%}
