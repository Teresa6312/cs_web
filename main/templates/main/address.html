{% extends "main/account.html" %}


{% block account_content %}

<div class="w3-cell w3-container w3-mobile">
    <h2>Address Book:</h2>
identify error to load this page in cmd
        {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li>{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
        {% else %}
        {% endif%}

<!-- display default address -->
    <div class="w3-card-2 w3-round w3-container ">
        {% if user.userprofile.default_address %}
            <h4>{{user.userprofile.default_address.location_name}}</h4>
            {% if not user.userprofile.default_address.follow_user_infor %}
                <h5>{{user.userprofile.default_address.last_name}}, {{user.userprofile.default_address.first_name}}(Default)</h5>

                    {% if user.userprofile.default_address.phone and user.userprofile.default_address.email %}
                        {{user.userprofile.default_address.phone}} |
                        {{user.userprofile.default_address.email}}<br/>
                    {% elif user.userprofile.default_address.phone or user.userprofile.default_address.email%}
                        {{user.userprofile.default_address.phone}} {{user.userprofile.default_address.email}}<br/>
                    {% endif %}



            {% else %}
                (Default)<br/>
            {% endif %}
            {{user.userprofile.default_address.address}}<br/>
            {{user.userprofile.default_address.apt}}<br/>
            {{user.userprofile.default_address.city}}<br/>
            {{user.userprofile.default_address.state}}<br/>
            {{user.userprofile.default_address.zipcode}}<br/>
            {{user.userprofile.default_address.country}}<br/>
            <button><a href="{% url 'editaddress' user.userprofile.default_address.id %}" >Edit</a></button>
            <button><a href="{% url 'deleteaddress' user.userprofile.default_address.id %}" >Delete</a></button>
        {% endif %}
  </div>


<!-- display other addresses -->
{% if user.address_set.all %}{% for address in user.address_set.all %}
{% if address != user.userprofile.default_address%}
    <div class="w3-card-2 w3-round w3-container">
        <h4>{{address.location_name}}</h4>
        {% if not address.follow_user_infor %}
            <h5>{{address.last_name}}, {{address.first_name}}</h5>

                {% if address.phone and address.email%}
                    {{address.phone}} | {{address.email}}<br/>
                {% elif address.phone or address.email%}
                    {{address.phone}}{{address.email}}<br/>
                {% endif %}


        {% endif %}
            {{address.address}}<br/>
            {{address.apt}}<br/>
            {{address.city}}, {{address.state}} {{address.zipcode}}<br/>
            {{address.country}}<br/>
            <button><a href="{% url 'editaddress' address.pk %}" >Edit</a></button>
            <button><a href="{% url 'deleteaddress' address.pk %}" >Delete</a></button>
            <button><a href="{% url 'set_dedault_address' address.pk %}" >Set as Default Address</a></button>
    </div>

{% endif %}{% endfor %}{% endif %}

</div>
<div class="w3-cell w3-container w3-mobile">
    <div class="w3-card-2 w3-round w3-container w3-mobile" style="width:500px">

        <ul class="messages">
            {% if form.errors %}

                {% for message in form.errors%}
                 <li>{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}

            {% endif %}
        </ul>

        <form method="post">
        {% csrf_token %}
         <h3> Add new address:</h3>
        <div class="w3-container">
            <input type="checkbox" name="follow_user_infor" id="id_follow_user_infor" value="{{add.follow_user_infor}}"> Follow User Information
        </div>
        <div class="w3-half w3-container">
        First Name:
            <input type="text" name="first_name" class="w3-input w3-border" id="id_first_name" value="{{add.first_name}}">
        </div>
        <div class="w3-half w3-container">
        Last Name:
            <input type="text" name="last_name" class="w3-input w3-border" id="id_last_name" value="{{add.last_name}}">
        </div>
        <div class="w3-container">
        Address:
            <input type="text" name="address" class="w3-input w3-border" id="id_address" value="{{add.address}}">
        Apartment:
            <input type="text" name="apt" class="w3-input w3-border" id="id_apt" value="{{add.apt}}">
        </div>
        <div class="w3-half w3-container">
        City:
            <input type="text" name="city" class="w3-input w3-border" id="id_city" value="{{add.city}}">
        </div>
        <div class="w3-half w3-container">
        State:
            <input type="text" name="state" class="w3-input w3-border" id="id_state" value="{{add.state}}">
        </div>
        <div class="w3-row w3-container">
        Country:
            <input type="text" name="country" class="w3-input w3-border" id="id_country" value="{{add.country}}">
        </div>
        <div class="w3-half w3-container">
        Zip code:
            <input type="text" name="zipcode" class="w3-input w3-border" id="id_zipcode" value="{{add.zipcode}}">
        </div>
        <div class="w3-container">
        Phone:
            <input type="text" name="phone" class="w3-input w3-border" id="id_phone"  value="{{add.phone}}">
        Email:
            <input type="text" name="email" class="w3-input w3-border" id="id_email" value="{{add.email}}">
        Nikename:
            <input type="text" name="location_name" class="w3-input w3-border" id="id_location_name" value="{{add.location_name}}">
        </div>
        <input type="submit" value="Save" >
        <button class="btn" type="submit" name="cancel" value="Cancel" >Cancel</button>
        </form>
    </div>
</div>
{% endblock %}
