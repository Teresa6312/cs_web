{% extends "main/account.html" %}
{% load i18n static %}

{% block title%}
{% trans 'Update Profile' %}
{% endblock%}

{% block extrastyle %}
<link rel="stylesheet" type="text/css" href="{% static "admin/css/forms.css" %}" />
{% endblock %}

{% block account_content %}
    <div class="w3-mobile">

        <form method = "post">
        {% csrf_token %}
        {% if form.errors %}
            <p class="errornote">
            {% if form.errors.items|length == 1 %}{% trans "Please correct the error below." %}{% else %}{% trans "Please correct the errors below." %}{% endif %}
            </p>
        {% endif %}
            <fieldset class="module aligned w3-mobile">
                  <h2 class="w3-sand w3-text-indigo w3-large">{% trans 'Update My Profile' %}</h2>
                  <div class="form-row">
                    {{ form.username.errors }}

                    {{ form.username.label_tag }} {{ form.username }}
                    <input type="hidden" name="next" value="{{ next }}" />
                  </div>
                  <div class="form-row">
                    {{ form.first_name.errors }}
                    {{ form.first_name.label_tag }} {{ form.first_name }}
                  </div>
                  <div class="form-row">
                    {{ form.last_name.errors }}
                    {{ form.last_name.label_tag }} {{ form.last_name }}
                  </div>
                  <div class="form-row">
                    {{ form.birthday.errors }}
                    {{ form.birthday.label_tag }}
                    {{ form.birthday }}
                  </div>
                  <div class="form-row">
                    {{ form.email.errors }}
                    {{ form.email.label_tag }} {{ form.email }}
                  </div>
                  <div class="form-row">
                    {{ form.phone.errors }}
                    {{ form.phone.label_tag }} {{ form.phone }}
                  </div>
                  <div class="form-row">
                    {{ form.country.errors }}
                    {{ form.country.label_tag }} {{ form.country }}
                  </div>
                  <div class="form-row">
                    {{ form.language.errors }}
                    {{ form.language.label_tag }} {{ form.language }}
                  </div>
            </fieldset>
            <fieldset class="module w3-mobile">
              <h2 class="w3-sand w3-text-indigo w3-large">{% trans "Default Address" %}</h2>
              {% include "blocks/address_block_all.html" with add_field_name='default_address' %}
            </fieldset>
            <fieldset class="module w3-mobile">
              {% include "blocks/modal.html" with element='select-col' title=_('Select a Collection Point') block='select_collection_point_block'%}
              <div id="default_col_block">
                <h2 class="w3-sand w3-text-indigo w3-large">{% trans "Default Collection Point" %}</h2>

                {% if user.collectionpoint and user.default_col %}
                    {% include "blocks/default_col_card.html" with col=user.default_col%}
                {% elif user.default_col %}
                    <div class="w3-row"><button type="button" id="select_col_btn"></button></div>
                    {% include "blocks/default_col_card.html" with col=user.default_col%}
                    <div class="w3-row"><button type="button" id="remove_default_col_btn" style="display:none;">{% trans 'Remove Default Collection Point' %}</button></div>
                {% else %}
                    <div class="w3-row"><button type="button" id="select_col_btn"></button></div>
                    <div class="w3-row"><button type="button" id="remove_default_col_btn" style="display:none;">{% trans 'Remove Default Collection Point' %}</button></div>
                {% endif %}
              </div>
            </fieldset>

            <div class="submit-row">
                <button type="button" onclick="window.location.href = document.referrer">{% trans "Cancel" %}</button>
                <input type="submit" value="Update">
            </div>
    </form>
</div>
{% endblock %}


{% block script%}
{% endblock %}
