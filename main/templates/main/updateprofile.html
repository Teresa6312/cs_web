{% extends "main/account.html" %}
{% load i18n static %}

{% block title%}
Update Profile | Qycs Global Shipping Inc. | English Official Website
{% endblock%}


{% block account_content %}


{% if messages %}
<ul class="messagelist">{% for message in messages %}
  <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message|capfirst }}</li>
{% endfor %}</ul>
{% endif %}

{% if userform.errors %}
<ul class="messagelist">
    {% for message in userform.errors%}
    <li class="error" {% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message|capfirst }}</li>
    {% endfor %}
</ul>
{% endif %}

    <div class="w3-cell w3-container">
        <h2> Update My Profile</h2>
        <form method = "post">
        {% csrf_token %}
            {% include "blocks/profile_block.html"%}
            <div class = "w3-container">
                <h4>Default Address:</h4>
                {% include "blocks/address_block_all.html" with addform=addform%}
            </div>

            <div class = "w3-container">
                <h4>Default Collection Point:</h4>
                {% if user.userprofile.default_col %}
                    {% if not user.collectionpoint %}
                        <button type="button" id="change_col_btn"> Change</button><br/>
                    {% endif %}
                    <div id="default_col_card" class="w3-card-2 w3-round w3-mobile w3-container" style="width:500px">
                        <h4>{{user.userprofile.default_col.name}}
                            {% if user.userprofile.default_col.store %}
                                (Store)
                            {% else %}
                                (Personal Place)
                            {% endif %}
                        </h4>
                            {{user.userprofile.default_col.address}}<br/>
                            {{user.userprofile.default_col.apt}}<br/>
                            {{user.userprofile.default_col.city}}, {{user.userprofile.default_col.state}} {{user.userprofile.default_col.zipcode}}<br/>
                            {{user.userprofile.default_col.country}}<br/>
                    </div>

              {% else %}
                  <button id="select_col_btn"> Select a Collection Point</button>
              {% endif %}

              <div id="collection_points_list" class="w3-cell-row" style="display: none">
                  {% include "blocks/sellect_collection_point.html" with col_list=col_list%}
              </div>
        </div>

        <input type="submit" value="Update">
        <button type="button" onclick="window.location.href = document.referrer">Cancel</button>
    </form>
</div>
{% endblock %}


{% block script%}

<script>

var js_list = '''{{user.address_set.all|safe}}''';

console.log(js_list)
    $(document).ready(function(){


        $("#select_col_btn").click(function(){
             $("#collection_points_list").show();
             $('#collection_points_list').hide().slideDown(500);

        });
        // $("#change_col_btn").click(function(){
        //      $("#collection_points_list").show();
        //      $("#change_col_btn").remove();
        //      $("#default_col_card").remove();
        //
        // });
    })


</script>
{% endblock %}
