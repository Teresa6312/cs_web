{% extends "main/base.html" %}


{% block content %}
	<div class="w3-cell aside-bar-background-color w3-mobile" style="width:300px">
		<div class="w3-bar-block">

		    <a class="w3-bar-item w3-hover-purple" href="{% url 'userprofile' %}">User Information</a>
		    <a class="w3-bar-item w3-hover-purple" href="{% url 'useraddress' %}">Address List</a>
		    <a class="w3-bar-item w3-hover-purple" href="{% url 'userpackage' %}">Packages History</a>
		    <a class="w3-bar-item w3-hover-purple" href="{% url 'userwallet' %}">Wallet</a>
		    <a class="w3-bar-item w3-hover-purple" href="/accounts/logout/">Logout</a>
		</div>
	</div>

	{% block account_content%}
	<div class="w3-cell w3-container w3-mobile">

			<h2>{{user.username}}
			{% if user.collectionpoint %}
			(Collector)
			{% endif %}</h2>
				{% if not user.collectionpoint %}
				<button><a href="{% url 'colregister'%}"> Register as Collector</a></button><br/>
				{% endif%}
				<div class = "w3-container">
						First Name: {{user.first_name}}<br/>
						Last Name: {{user.last_name}}<br/>
						Email address:{{user.email}}
						{% if not user.bound_email%}
							<a>To Bound my Email (this will send a request to the user's email)</a>
						{% endif %}<br/>
						Phone Number: {{user.userprofile.phone}}<br/>
						Birthday: {{user.userprofile.birthday|date:"M d, Y" }}<br/>
						<h4>Default Address</h4>
							{% if user.userprofile.default_address %}
									<div id="default_address_card" class="w3-card-2 w3-round w3-container w3-mobile" style="width:400px">
											<h4>{{user.userprofile.default_address.location_name}}</h4>
											{% if not user.userprofile.default_address.follow_user_infor %}
													<h5>{{user.userprofile.default_address.last_name}}, {{user.userprofile.default_address.first_name}}</h5>
													{% if user.userprofile.default_address.phone and user.userprofile.default_address.email%}
															{{user.userprofile.default_address.phone}} | {{user.userprofile.default_address.email}}<br/>
													{% elif user.userprofile.default_address.phone or user.userprofile.default_address.email%}
															{{user.userprofile.default_address.phone}}{{user.userprofile.default_address.email}}<br/>
													{% endif %}
											{% else %}
													{{user.last_name}}, {{user.first_name}}<br/>
													{% if user.email and user.userprofile.phone %}
															{{user.email}} | {{user.userprofile.phone}}<br/>
													{% elif user.email or user.userprofile.phone%}
															{{user.email}}{{user.userprofile.phone}}<br/>
													{% endif %}
											{% endif %}
													{{user.userprofile.default_address.address}}<br/>
													{{user.userprofile.default_address.apt}}<br/>
													{{user.userprofile.default_address.city}}, {{user.userprofile.default_address.state}} {{user.userprofile.default_address.zipcode}}<br/>
													{{user.userprofile.default_address.country}}<br/>
									</div>
							{% else %}
									No default address!
							{% endif %}
							<h4>Default Collection Point</h4>
								{% if user.userprofile.default_col%}
									<div class="w3-card-2 w3-round w3-half w3-container">
										<div class="w3-half">
											<h4>{{user.userprofile.default_col.name}}
                            {% if user.userprofile.default_col.store %}
                                (Store)
                            {% else %}
                                (Personal Place)
                            {% endif %}</h4>
                            {{user.userprofile.default_col.address}}<br/>
                            {{user.userprofile.default_col.apt}}<br/>
                            {{user.userprofile.default_col.city}}, {{user.userprofile.default_col.state}} {{user.userprofile.default_col.zipcode}}<br/>
                            {{user.userprofile.default_col.country}}<br/>


                        </div>

                        <div class="w3-half">
                            {% if user.userprofile.default_col.image %}
														{% load static %}
                                <img src = "{{user.userprofile.default_col.image.url}}" style="width:100%">
                            {% endif %}
                        </div>
                    </div>
									{% else %}
									No default Collection Point!
                {% endif %}
			</div>
			<button type = "button" onclick="window.location.href = '{% url 'updateprofile'%}'">Update Profile</button>
			<button type = "button" onclick="window.location.href = '{% url 'changepassword'%}'">Change Password</button>

		</div>
	{% endblock %}
{% endblock %}
