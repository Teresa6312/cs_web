{% extends "main/account.html" %}


{% block account_content %}

<div class="w3-cell w3-container w3-mobile">
    <h2>Address Book:</h2>
      Use get_absolute_url would be better inseat of using address.id but how?<br/>
      Identify error to load this page in cmd?
        {% if messages %}
        <ul class="messages">
            {% for message in messages %}
            <li>{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
        {% else %}
        {% endif%}

<!-- display default address -->
    <div class="w3-card-2 w3-round w3-container ">
        {% if user.userprofile.default_address %}
            <h4>{{user.userprofile.default_address.location_name}}</h4>
            {% if not user.userprofile.default_address.follow_user_infor %}
                <h5>{{user.userprofile.default_address.last_name}}, {{user.userprofile.default_address.first_name}}(Default)</h5>

                    {% if user.userprofile.default_address.phone and user.userprofile.default_address.email %}
                        {{user.userprofile.default_address.phone}} |
                        {{user.userprofile.default_address.email}}<br/>
                    {% elif user.userprofile.default_address.phone or user.userprofile.default_address.email%}
                        {{user.userprofile.default_address.phone}} {{user.userprofile.default_address.email}}<br/>
                    {% endif %}



            {% else %}
                (Default)<br/>
            {% endif %}
            {{user.userprofile.default_address.address}}<br/>
            {{user.userprofile.default_address.apt}}<br/>
            {{user.userprofile.default_address.city}}<br/>
            {{user.userprofile.default_address.state}}<br/>
            {{user.userprofile.default_address.zipcode}}<br/>
            {{user.userprofile.default_address.country}}<br/>


            <button><a href={{user.userprofile.default_address.get_absolute_url.edit}} >Edit</a></button>
            <button><a href={{user.userprofile.default_address.get_absolute_url.delete}} >Delete</a></button>
        {% endif %}
  </div>


<!-- display other addresses -->
{% if user.address_set.all %}{% for address in user.address_set.all %}
{% if address != user.userprofile.default_address%}
    <div class="w3-card-2 w3-round w3-container">
        <h4>{{address.location_name}}</h4>
        {% if not address.follow_user_infor %}
            <h5>{{address.last_name}}, {{address.first_name}}</h5>

                {% if address.phone and address.email%}
                    {{address.phone}} | {{address.email}}<br/>
                {% elif address.phone or address.email%}
                    {{address.phone}}{{address.email}}<br/>
                {% endif %}


        {% endif %}
            {{address.address}}<br/>
            {{address.apt}}<br/>
            {{address.city}}, {{address.state}} {{address.zipcode}}<br/>
            {{address.country}}<br/>
            <button><a href={{address.get_absolute_url.edit}} >Edit</a></button>
            <button><a href={{address.get_absolute_url.delete}} >Delete</a></button>
            <button><a href={{address.get_absolute_url.set_default}}>Set as Default Address</a></button>
    </div>

{% endif %}{% endfor %}{% endif %}

</div>
<div class="w3-cell w3-container w3-mobile">
    <div class="w3-card-2 w3-round w3-container w3-mobile" style="width:500px">

        <ul class="messages">
            {% if form.errors %}

                {% for message in form.errors%}
                 <li>{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}

            {% endif %}
        </ul>

        <form method="post">
        {% csrf_token %}
         <h3> Add new address:</h3>
         <div id = "addressForm" class=" w3-row">
               <div class="w3-container">
                   {{addform.follow_user_infor}}Follow User Information
               </div>
               <div class="w3-half w3-container">
               First Name:{{addform.first_name}}
               </div>
               <div class="w3-half w3-container">
               Last Name:
                   {{addform.last_name}}
               </div>
               <div class="w3-half w3-container">
               Phone:
                   {{addform.phone}}</div>
               <div class="w3-half w3-container">
               Email:
                   {{addform.email}}</div>
               <div class="w3-container">
               Address:
                   {{addform.address}}
               Apartment:
                   {{addform.apt}}
               </div>
               <div class="w3-quarter w3-container">
               City:
                   {{addform.city}}
               </div>
               <div class="w3-quarter w3-container">
               State:
                   {{addform.state}}
               </div>
               <div class="w3-quarter w3-container">
               Country:
                   {{addform.country}}
               </div>
               <div class="w3-quarter w3-container">
               Zip code:
                   {{addform.zipcode}}
               </div>
               <div class="w3-half w3-container">
               Nikename:
                   {{addform.location_name}}
               </div>
         </div>
        <input type="submit" value="Save" >
        <button class="btn" type="submit" name="cancel" value="Cancel" >Cancel</button>
        </form>
    </div>
</div>
{% endblock %}
